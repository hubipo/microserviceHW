{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'CitySearch',\n  data() {\n    return {\n      city: '',\n      generalInfo: null,\n      economyInfo: null,\n      weatherInfo: null,\n      touristInfo: null,\n      loading: false,\n      error: null\n    };\n  },\n  computed: {\n    hasResults() {\n      return this.generalInfo || this.economyInfo || this.weatherInfo || this.touristInfo;\n    }\n  },\n  methods: {\n    async search() {\n      if (!this.city.trim()) {\n        return;\n      }\n      this.loading = true;\n      this.error = null;\n      this.generalInfo = null;\n      this.economyInfo = null;\n      this.weatherInfo = null;\n      this.touristInfo = null;\n      try {\n        const [generalRes, economyRes, weatherRes, touristRes] = await Promise.all([axios.get(`/api/city/general/${this.city}`), axios.get(`/api/city/economy/${this.city}`), axios.get(`/api/city/weather/${this.city}`), axios.get(`/api/city/tourist/${this.city}`)]);\n        this.generalInfo = generalRes.data;\n        this.economyInfo = economyRes.data;\n        this.weatherInfo = weatherRes.data;\n        this.touristInfo = touristRes.data;\n      } catch (err) {\n        this.error = err.message;\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","city","generalInfo","economyInfo","weatherInfo","touristInfo","loading","error","computed","hasResults","methods","search","trim","generalRes","economyRes","weatherRes","touristRes","Promise","all","get","err","message"],"sources":["D:\\courseHomework\\microService\\frontend\\src\\components\\CitySearch.vue"],"sourcesContent":["<template>\n    <div class=\"city-search\">\n      <div class=\"search-section\">\n        <input v-model=\"city\" @keyup.enter=\"search\" placeholder=\"输入城市名称\" />\n        <button @click=\"search\">搜索</button>\n      </div>\n      \n      <div v-if=\"loading\" class=\"loading-section\">加载中...</div>\n      <div v-if=\"error\" class=\"error-section\">出错了: {{ error }}</div>\n  \n      <div v-if=\"!loading && !error && hasResults\" class=\"result-section\">\n        <h2>关于 {{ city }} 的信息</h2>\n  \n        <div class=\"general-info\">\n          <h3>基本信息</h3>\n          <p>{{ generalInfo }}</p>\n        </div>\n        \n        <div class=\"economy-info\">\n          <h3>经济信息</h3>\n          <p>{{ economyInfo }}</p>\n        </div>\n        \n        <div class=\"weather-info\">\n          <h3>天气信息</h3>\n          <p>{{ weatherInfo }}</p>\n        </div>\n  \n        <div class=\"tourist-info\">\n          <h3>旅游景点信息</h3>\n          <p>{{ touristInfo }}</p>\n        </div>\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import axios from 'axios';\n  \n  export default {\n    name: 'CitySearch',\n    data() {\n      return {\n        city: '',\n        generalInfo: null,\n        economyInfo: null,\n        weatherInfo: null,\n        touristInfo: null,\n        loading: false,\n        error: null,\n      };\n    },\n    computed: {\n      hasResults() {\n        return this.generalInfo || this.economyInfo || this.weatherInfo || this.touristInfo;\n      }\n    },\n    methods: {\n      async search() {\n        if (!this.city.trim()) {\n          return;\n        }\n        this.loading = true;\n        this.error = null;\n        this.generalInfo = null;\n        this.economyInfo = null;\n        this.weatherInfo = null;\n        this.touristInfo = null;\n  \n        try {\n          const [generalRes, economyRes, weatherRes, touristRes] = await Promise.all([\n            axios.get(`/api/city/general/${this.city}`),\n            axios.get(`/api/city/economy/${this.city}`),\n            axios.get(`/api/city/weather/${this.city}`),\n            axios.get(`/api/city/tourist/${this.city}`),\n          ]);\n  \n          this.generalInfo = generalRes.data;\n          this.economyInfo = economyRes.data;\n          this.weatherInfo = weatherRes.data;\n          this.touristInfo = touristRes.data;\n        } catch (err) {\n          this.error = err.message;\n        } finally {\n          this.loading = false;\n        }\n      },\n    },\n  };\n  </script>\n  \n  <style scoped>\n  .city-search {\n    max-width: 600px;\n    margin: 0 auto;\n    padding: 20px;\n  }\n  \n  .search-section {\n    display: flex;\n    gap: 10px;\n  }\n  \n  .result-section {\n    margin-top: 20px;\n  }\n  \n  .loading-section,\n  .error-section {\n    margin-top: 20px;\n    color: red;\n  }\n  </style>\n  "],"mappings":"AAqCE,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,EAAE;MACRC,WAAW,EAAE,IAAI;MACjBC,WAAW,EAAE,IAAI;MACjBC,WAAW,EAAE,IAAI;MACjBC,WAAW,EAAE,IAAI;MACjBC,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE;IACT,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,UAAUA,CAAA,EAAG;MACX,OAAO,IAAI,CAACP,WAAU,IAAK,IAAI,CAACC,WAAU,IAAK,IAAI,CAACC,WAAU,IAAK,IAAI,CAACC,WAAW;IACrF;EACF,CAAC;EACDK,OAAO,EAAE;IACP,MAAMC,MAAMA,CAAA,EAAG;MACb,IAAI,CAAC,IAAI,CAACV,IAAI,CAACW,IAAI,CAAC,CAAC,EAAE;QACrB;MACF;MACA,IAAI,CAACN,OAAM,GAAI,IAAI;MACnB,IAAI,CAACC,KAAI,GAAI,IAAI;MACjB,IAAI,CAACL,WAAU,GAAI,IAAI;MACvB,IAAI,CAACC,WAAU,GAAI,IAAI;MACvB,IAAI,CAACC,WAAU,GAAI,IAAI;MACvB,IAAI,CAACC,WAAU,GAAI,IAAI;MAEvB,IAAI;QACF,MAAM,CAACQ,UAAU,EAAEC,UAAU,EAAEC,UAAU,EAAEC,UAAU,IAAI,MAAMC,OAAO,CAACC,GAAG,CAAC,CACzEpB,KAAK,CAACqB,GAAG,CAAC,qBAAqB,IAAI,CAAClB,IAAI,EAAE,CAAC,EAC3CH,KAAK,CAACqB,GAAG,CAAC,qBAAqB,IAAI,CAAClB,IAAI,EAAE,CAAC,EAC3CH,KAAK,CAACqB,GAAG,CAAC,qBAAqB,IAAI,CAAClB,IAAI,EAAE,CAAC,EAC3CH,KAAK,CAACqB,GAAG,CAAC,qBAAqB,IAAI,CAAClB,IAAI,EAAE,CAAC,CAC5C,CAAC;QAEF,IAAI,CAACC,WAAU,GAAIW,UAAU,CAACb,IAAI;QAClC,IAAI,CAACG,WAAU,GAAIW,UAAU,CAACd,IAAI;QAClC,IAAI,CAACI,WAAU,GAAIW,UAAU,CAACf,IAAI;QAClC,IAAI,CAACK,WAAU,GAAIW,UAAU,CAAChB,IAAI;MACpC,EAAE,OAAOoB,GAAG,EAAE;QACZ,IAAI,CAACb,KAAI,GAAIa,GAAG,CAACC,OAAO;MAC1B,UAAU;QACR,IAAI,CAACf,OAAM,GAAI,KAAK;MACtB;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}